document.addEventListener("DOMContentLoaded",()=>{function x(i){const m=Math.floor(i/3600),y=Math.floor(i%3600/60),d=i%60,r=String(y).padStart(2,"0"),p=String(d).padStart(2,"0");return m>0?`${String(m).padStart(2,"0")}:${r}:${p}`:`${r}:${p}`}const a=document.getElementById("playerWrapper"),g=document.getElementById("videoThumbnailOverlay"),R=document.getElementById("loader"),$=document.getElementById("initPlay");a.style.setProperty("height",`${window.innerHeight}px`);const l=document.getElementById("videoPlayer"),u=new Hls;u.attachMedia(l),Hls.isSupported()&&u.loadSource(playerState.srcURL);function M(){g.classList.replace("flex","hidden"),playerState.playing=!0,playerState.playing?l.play():l.pause()}if(u.on(Hls.Events.MANIFEST_PARSED,()=>{l.addEventListener("loadeddata",()=>{playerState.duration=l.duration.toFixed(2),$.classList.remove("hidden"),R.classList.add("hidden"),g.addEventListener("click",M)})}),document.getElementById("videoControlsOverlay")){let L=function(){playerState.playing=!playerState.playing,playerState.playing?l.play():l.pause(),p.classList.replace(playerState.playing?"fa-play":"fa-pause",playerState.playing?"fa-pause":"fa-play");const e=()=>{playerState.throttleTimeout||(h.classList.remove("hidden"),clearTimeout(playerState.mouseMoveTimeout),playerState.throttleTimeout=!0,setTimeout(()=>{playerState.throttleTimeout=!1},200),playerState.mouseMoveTimeout=setTimeout(()=>{h.classList.add("hidden")},4e3))};playerState.playing?(f.classList.add("hidden"),a.addEventListener("mousemove",e)):(a.removeEventListener("mousemove",e),h.classList.remove("hidden"))},b=function(){f.classList.toggle("hidden")},B=function(e){const t=playerState.availableResolutions.findIndex(n=>`${n.height}p`===e);playerState.currentResolution=t,u.currentLevel=t,k.querySelectorAll("button").forEach((n,c)=>{c===t||t===-1&&n.textContent==="Auto"?(n.style.backgroundColor=playerState.menuActive,n.style.color=playerState.menuActiveText):(n.style.backgroundColor=playerState.menuBackground,n.style.color=playerState.menuText)}),f.classList.add("hidden")},T=function(){playerState.fullscreen=!playerState.fullscreen;const e=()=>{a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()},t=()=>{document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()};playerState.fullscreen&&document.fullscreenElement!==a?(e(),y.classList.replace("fa-expand","fa-compress")):!playerState.fullscreen&&document.fullscreenElement===a&&(t(),y.classList.replace("fa-compress","fa-expand"))},F=function(){playerState.muted=!playerState.muted,l.muted=playerState.muted,S.classList.toggle("fa-volume-xmark",playerState.muted),S.classList.toggle("fa-volume-low",!playerState.muted)};var X=L,D=b,_=B,U=T,V=F;const i=document.getElementById("videoControlsOverlay"),m=document.getElementById("seekBarCurrentProgress"),y=document.getElementById("fullscreenButton"),d=document.getElementById("seekBarBackground"),r=document.getElementById("volumeSeek"),p=document.getElementById("bottomLeftPlayPause"),S=document.getElementById("volumeButton"),k=document.getElementById("qualities"),h=document.getElementById("bottomControlBar"),f=document.getElementById("menu"),q=document.getElementById("currentVolume"),A=document.getElementById("timeStamp"),H=document.getElementById("pictureInPicture"),O=document.getElementById("settingsButton"),z=document.getElementById("videoOverlay");g.addEventListener("click",()=>{i.classList.replace("hidden","flex")}),u.on(Hls.Events.MANIFEST_PARSED,()=>{playerState.availableResolutions=u.levels;const e=t=>{const o=document.createElement("button");o.textContent=t,o.className="w-full text-left px-2",o.onclick=()=>B(t),k.appendChild(o)};playerState.availableResolutions.forEach((t,o)=>e(`${t.height}p`)),e("Auto"),B(playerState.currentResolution)});async function N(){l!==document.pictureInPictureElement?(await l.requestPictureInPicture(),playerState.pictureInPicture=!0,l.addEventListener("leavepictureinpicture",()=>{playerState.pictureInPicture=!1})):await document.exitPictureInPicture()}if(document.getElementById("speeds")){const e=document.getElementById("speeds"),t=n=>{e.querySelectorAll("button").forEach(s=>{s.textContent===`${n}x`?(s.style.backgroundColor=playerState.menuActive,s.style.color=playerState.menuActiveText):(s.style.backgroundColor=playerState.menuBackground,s.style.color=playerState.menuText)}),playerState.currentPlaybackSpeed=n,l.playbackRate=n,f.classList.add("hidden")},o=n=>{const c=document.createElement("button");c.textContent=`${n}x`,c.className="w-full text-left px-2",c.onclick=()=>t(n),e.appendChild(c)};playerState.playbackSpeeds.forEach(n=>o(n)),t(playerState.currentPlaybackSpeed)}const w=(e,t,o)=>{const n=t.getBoundingClientRect(),c=e-n.left,s=n.width,E=Math.min(Math.max(c/s,0),1);o(E)},v=(e,t,o,n,c)=>{const s=P=>w(P.clientX||P.touches[0].clientX,n,c),E=()=>{document.removeEventListener(t,s),document.removeEventListener(o,E)};w(e.clientX||e.touches[0].clientX,n,c),document.addEventListener(t,s),document.addEventListener(o,E)},I=e=>{const t=e;playerState.volume=t,q.style.width=`${Math.round(t*100)}%`,l.volume=t};I(playerState.volume);const C=e=>{const t=e*playerState.duration;playerState.currentTime=Math.round(t),m.style.width=`${Math.round(e*100)}%`,l.currentTime=t};r.addEventListener("mousedown",e=>v(e,"mousemove","mouseup",r,I)),r.addEventListener("touchstart",e=>v(e,"touchmove","touchend",r,I)),d.addEventListener("mousedown",e=>v(e,"mousemove","mouseup",d,C)),d.addEventListener("touchstart",e=>v(e,"touchmove","touchend",d,C)),l.addEventListener("timeupdate",()=>{playerState.currentTime=Math.round(l.currentTime);const e=playerState.currentTime/playerState.duration*100;l.buffered.length>0&&l.buffered.end(0)/playerState.duration*100,m.style.width=`${e}%`,A.innerText=`${x(playerState.currentTime)} / ${x(playerState.duration)}`}),O.addEventListener("click",b),H.addEventListener("click",N),y.addEventListener("click",T),S.addEventListener("click",F),p.addEventListener("click",L),z.addEventListener("click",L)}});
