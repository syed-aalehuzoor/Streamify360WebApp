document.addEventListener("DOMContentLoaded",()=>{function n(e){const t=Math.floor(e/3600);const n=Math.floor(e%3600/60);const l=e%60;const a=String(n).padStart(2,"0");const o=String(l).padStart(2,"0");if(t>0){const c=String(t).padStart(2,"0");return`${c}:${a}:${o}`}else{return`${a}:${o}`}}const l=document.getElementById("playerWrapper");const e=document.getElementById("videoThumbnailOverlay");const t=document.getElementById("loader");const a=document.getElementById("initPlay");l.style.setProperty("height",`${window.innerHeight}px`);const o=document.getElementById("videoPlayer");const c=new Hls;c.attachMedia(o);if(Hls.isSupported()){c.loadSource(playerState.srcURL)}function s(){e.classList.replace("flex","hidden");playerState.playing=true;playerState.playing?o.play():o.pause()}c.on(Hls.Events.MANIFEST_PARSED,()=>{o.addEventListener("loadeddata",()=>{playerState.duration=o.duration.toFixed(2);a.classList.remove("hidden");t.classList.add("hidden");e.addEventListener("click",s)})});if(document.getElementById("videoControlsOverlay")){const p=document.getElementById("videoControlsOverlay");const S=document.getElementById("seekBarCurrentProgress");const f=document.getElementById("fullscreenButton");const v=document.getElementById("seekBarBackground");const E=document.getElementById("volumeSeek");const g=document.getElementById("bottomLeftPlayPause");const h=document.getElementById("volumeButton");const L=document.getElementById("qualities");const B=document.getElementById("bottomControlBar");const I=document.getElementById("menu");const x=document.getElementById("currentVolume");const k=document.getElementById("timeStamp");const b=document.getElementById("pictureInPicture");const T=document.getElementById("settingsButton");const F=document.getElementById("videoOverlay");e.addEventListener("click",()=>{p.classList.replace("hidden","flex")});c.on(Hls.Events.MANIFEST_PARSED,()=>{playerState.availableResolutions=c.levels;const n=e=>{const t=document.createElement("button");t.textContent=e;t.className="w-full text-left px-2";t.onclick=()=>i(e);L.appendChild(t)};playerState.availableResolutions.forEach((e,t)=>n(`${e.height}p`));n("Auto");i(playerState.currentResolution)});function r(){playerState.playing=!playerState.playing;playerState.playing?o.play():o.pause();g.classList.replace(playerState.playing?"fa-play":"fa-pause",playerState.playing?"fa-pause":"fa-play");const e=()=>{if(!playerState.throttleTimeout){B.classList.remove("hidden");clearTimeout(playerState.mouseMoveTimeout);playerState.throttleTimeout=true;setTimeout(()=>{playerState.throttleTimeout=false},200);playerState.mouseMoveTimeout=setTimeout(()=>{B.classList.add("hidden")},4e3)}};if(playerState.playing){I.classList.add("hidden");l.addEventListener("mousemove",e)}else{l.removeEventListener("mousemove",e);B.classList.remove("hidden")}}function u(){I.classList.toggle("hidden")}async function d(){if(o!==document.pictureInPictureElement){await o.requestPictureInPicture();playerState.pictureInPicture=true;o.addEventListener("leavepictureinpicture",()=>{playerState.pictureInPicture=false})}else{await document.exitPictureInPicture()}}function i(t){const n=playerState.availableResolutions.findIndex(e=>`${e.height}p`===t);playerState.currentResolution=n;c.currentLevel=n;const e=L.querySelectorAll("button");e.forEach((e,t)=>{if(t===n||n===-1&&e.textContent==="Auto"){e.style.backgroundColor=playerState.menuActive;e.style.color=playerState.menuActiveText}else{e.style.backgroundColor=playerState.menuBackground;e.style.color=playerState.menuText}});I.classList.add("hidden")}if(document.getElementById("speeds")){const $=document.getElementById("speeds");const M=t=>{const e=$.querySelectorAll("button");e.forEach(e=>{if(e.textContent===`${t}x`){e.style.backgroundColor=playerState.menuActive;e.style.color=playerState.menuActiveText}else{e.style.backgroundColor=playerState.menuBackground;e.style.color=playerState.menuText}});playerState.currentPlaybackSpeed=t;o.playbackRate=t;I.classList.add("hidden")};const q=e=>{const t=document.createElement("button");t.textContent=`${e}x`;t.className="w-full text-left px-2";t.onclick=()=>M(e);$.appendChild(t)};playerState.playbackSpeeds.forEach(e=>q(e));M(playerState.currentPlaybackSpeed)}function m(){playerState.fullscreen=!playerState.fullscreen;const e=()=>{if(l.requestFullscreen)l.requestFullscreen();else if(l.mozRequestFullScreen)l.mozRequestFullScreen();else if(l.webkitRequestFullscreen)l.webkitRequestFullscreen();else if(l.msRequestFullscreen)l.msRequestFullscreen()};const t=()=>{if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.msExitFullscreen)document.msExitFullscreen()};if(playerState.fullscreen&&document.fullscreenElement!==l){e();f.classList.replace("fa-expand","fa-compress")}else if(!playerState.fullscreen&&document.fullscreenElement===l){t();f.classList.replace("fa-compress","fa-expand")}}function y(){playerState.muted=!playerState.muted;o.muted=playerState.muted;h.classList.toggle("fa-volume-xmark",playerState.muted);h.classList.toggle("fa-volume-low",!playerState.muted)}const w=(e,t,n)=>{const l=t.getBoundingClientRect();const a=e-l.left;const o=l.width;const c=Math.min(Math.max(a/o,0),1);n(c)};const C=(e,t,n,l,a)=>{const o=e=>w(e.clientX||e.touches[0].clientX,l,a);const c=()=>{document.removeEventListener(t,o);document.removeEventListener(n,c)};w(e.clientX||e.touches[0].clientX,l,a);document.addEventListener(t,o);document.addEventListener(n,c)};const P=e=>{const t=e;playerState.volume=t;x.style.width=`${Math.round(t*100)}%`;o.volume=t};P(playerState.volume);const R=e=>{const t=e*playerState.duration;playerState.currentTime=Math.round(t);S.style.width=`${Math.round(e*100)}%`;o.currentTime=t};E.addEventListener("mousedown",e=>C(e,"mousemove","mouseup",E,P));E.addEventListener("touchstart",e=>C(e,"touchmove","touchend",E,P));v.addEventListener("mousedown",e=>C(e,"mousemove","mouseup",v,R));v.addEventListener("touchstart",e=>C(e,"touchmove","touchend",v,R));o.addEventListener("timeupdate",()=>{playerState.currentTime=Math.round(o.currentTime);const e=playerState.currentTime/playerState.duration*100;const t=o.buffered.length>0?o.buffered.end(0)/playerState.duration*100:0;S.style.width=`${e}%`;k.innerText=`${n(playerState.currentTime)} / ${n(playerState.duration)}`});T.addEventListener("click",u);b.addEventListener("click",d);f.addEventListener("click",m);h.addEventListener("click",y);g.addEventListener("click",r);F.addEventListener("click",r)}});